import{j as e}from"./jsx-runtime.BG36-YHJ.js";import{r as c}from"./index.y5FlbPQu.js";import{u as S,A as E}from"./chatStore.Q8HlNThg.js";function T({userId:p}){const{currentAgent:o,setAgent:j,activeProject:s,projects:x,projectsLoading:v,fetchProjects:h,createProject:N,selectProject:g,clearProject:y}=S(),[k,r]=c.useState(!1),[a,n]=c.useState(""),[m,u]=c.useState(!1);c.useEffect(()=>{h()},[h]);const C=t=>{t.id!==o.id&&j(t)},f=async()=>{a.trim()&&(u(!0),await N(a.trim()),u(!1),n(""),r(!1))},P=t=>{s?.id!==t.id&&g(t.id)},A=t=>{const i=new Date(t),l=new Date().getTime()-i.getTime(),d=Math.floor(l/6e4),w=Math.floor(l/36e5),b=Math.floor(l/864e5);return d<1?"Just now":d<60?`${d}m ago`:w<24?`${w}h ago`:b<7?`${b}d ago`:i.toLocaleDateString()};return e.jsxs("aside",{className:"w-64 bg-vs-card border-r border-vs-border p-4 flex flex-col",children:[e.jsx("h3",{className:"text-sm font-medium text-white/50 uppercase tracking-wider mb-3",children:"Agents"}),e.jsx("div",{className:"space-y-1",children:E.map(t=>e.jsx("button",{onClick:()=>C(t),className:`w-full text-left px-3 py-2 rounded-lg transition-colors text-sm ${o.id===t.id?"bg-vs-accent/20 text-vs-accent border border-vs-accent/30":"hover:bg-white/5 text-white/70"}`,children:t.name},t.id))}),e.jsxs("div",{className:"mt-6 flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-white/50 uppercase tracking-wider",children:"Projects"}),e.jsx("button",{onClick:()=>r(!0),className:"text-xs text-vs-accent hover:text-vs-accent/80 transition-colors",title:"New Project",children:"+ New"})]}),k&&e.jsxs("div",{className:"mb-3 p-2 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("input",{type:"text",value:a,onChange:t=>n(t.target.value),placeholder:"Project name...",autoFocus:!0,className:"w-full px-2 py-1 bg-transparent text-sm text-white placeholder-white/40 border-none outline-none",onKeyDown:t=>{t.key==="Enter"&&f(),t.key==="Escape"&&(r(!1),n(""))}}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:f,disabled:!a.trim()||m,className:"flex-1 px-2 py-1 text-xs bg-vs-accent text-white rounded disabled:opacity-50",children:m?"...":"Create"}),e.jsx("button",{onClick:()=>{r(!1),n("")},className:"px-2 py-1 text-xs text-white/50 hover:text-white",children:"Cancel"})]})]}),e.jsx("button",{onClick:y,className:`w-full text-left px-3 py-2 rounded-lg transition-colors text-sm mb-2 ${s?"hover:bg-white/5 text-white/50":"bg-white/10 text-white border border-white/20"}`,children:"+ New Chat"}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-1",children:v?e.jsx("div",{className:"text-white/40 text-sm text-center py-4",children:e.jsx("div",{className:"w-4 h-4 border-2 border-vs-accent border-t-transparent rounded-full animate-spin mx-auto"})}):x.length===0?e.jsx("p",{className:"text-white/40 text-sm text-center py-4",children:"No projects yet"}):x.map(t=>e.jsx("button",{onClick:()=>P(t),className:`w-full text-left rounded-lg transition-colors ${s?.id===t.id?"bg-vs-accent/20 border border-vs-accent/30":"hover:bg-white/5 border border-transparent"}`,children:e.jsxs("div",{className:"flex gap-2 p-2",children:[e.jsx("div",{className:"w-10 h-10 rounded bg-white/10 flex-shrink-0 overflow-hidden",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:"",className:"w-full h-full object-cover",onError:i=>{i.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/20",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm truncate ${s?.id===t.id?"text-vs-accent":"text-white/80"}`,children:t.name}),e.jsxs("p",{className:"text-xs text-white/40",children:[A(t.modified),t.outputCount?` Â· ${t.outputCount} outputs`:""]})]})]})},t.id))})]}),e.jsx("div",{className:"mt-auto pt-4 border-t border-vs-border",children:e.jsxs("div",{className:"text-xs text-white/40 space-y-1",children:[e.jsxs("p",{children:["User: ",p]}),e.jsxs("p",{children:["Agent: ",o.name]}),s&&e.jsxs("p",{className:"text-vs-accent/70 truncate",title:s.name,children:["Project: ",s.name]})]})})]})}export{T as default};
